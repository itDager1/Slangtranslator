/**
 * Slang Translator - Russian Slang to Standard Russian Translation App
 * 
 * Features:
 * - Bidirectional translation: Slang ↔ Standard Russian
 * - Word form recognition: automatically recognizes different grammatical forms
 *   (verb conjugations, noun/adjective declensions)
 * - Sentence translation: translates complete sentences while preserving structure
 * - Category-based dictionary organization
 * - Popular words suggestions
 * 
 * The system uses a word forms mapping (wordFormsMap) to normalize inflected words
 * to their base forms before translation, enabling natural language processing.
 */

import { useState } from "react";
import { Navbar } from "./components/Navbar";
import { Header } from "./components/Header";
import { SearchBar } from "./components/SearchBar";
import { CategorySlider } from "./components/CategorySlider";
import { PopularWords } from "./components/PopularWords";
import { TranslationDisplay } from "./components/TranslationDisplay";
import { Stats } from "./components/Stats";
import { Footer } from "./components/Footer";
import { Button } from "./components/ui/button";
import { ChevronDown, ArrowRightLeft } from "lucide-react";

export type TranslationMode = "slangToRussian" | "russianToSlang";

interface DictionaryEntry {
  word: string;
  definition: string;
  shortTranslation?: string; // One-word translation for slang to Russian
  examples: string[];
  category: string;
  explanations?: Array<{ word: string; explanation: string }>; // Explanations of slang words found in sentence
}

/**
 * Word forms mapping - links various forms of a word to its base form
 * This allows the translator to recognize words in different grammatical forms:
 * - Verb conjugations (present, past, future tenses; all persons)
 * - Noun declensions (all cases, singular and plural)
 * - Adjective declensions (all cases, genders, numbers)
 * 
 * When a word is entered, the system:
 * 1. First tries to find it directly in the dictionary
 * 2. If not found, looks up the base form in wordFormsMap
 * 3. Uses the base form to find the translation in the dictionary
 * 
 * This enables natural sentence translation with proper word forms.
 * 
 * Examples:
 * - "Я вчера чилил дома" → "Я вчера отдыхать дома"
 * - "Они флексят новыми кроссами" → "Они хвастаться новыми кроссами"
 * - "У него был полный батхёрт" → "У него был полный обида"
 * - "Не агрись по мелочам" → "Не злиться по мелочам"
 * - "Это работает криво" → "Это работает плохо"
 * 
 * Reverse translation (Russian → Slang):
 * - "Я хочу отдыхать" → "Я хочу чилить"
 * - "Они смеются над мемами" → "Они рофлить над мем"
 */
const wordFormsMap: Record<string, string> = {
  // Формы глагола "чилить"
  "чилил": "чилить",
  "чилила": "чилить",
  "чилило": "чилить",
  "чилили": "чилить",
  "чилю": "чилить",
  "чилишь": "чилить",
  "чилит": "чилить",
  "чилим": "чилить",
  "чилите": "чилить",
  "чилят": "чилить",
  "чилящий": "чилить",
  "почилить": "чилить",
  "почилил": "чилить",
  "почилила": "чилить",
  "почилим": "чилить",
  "чиль": "чилить",  // повелительное наклонение
  "чильте": "чилить",
  
  // Формы "рофлить"
  "рофлил": "рофлить",
  "рофлила": "рофлить",
  "рофлило": "рофлить",
  "рофлили": "рофлить",
  "рофлю": "рофлить",
  "рофлишь": "рофлить",
  "рофлит": "рофлить",
  "рофлим": "рофлить",
  "рофлите": "рофлить",
  "рофлят": "рофлить",
  "рофли": "рофлить",  // повелительное наклонение
  "порофлить": "рофлить",
  "порофлил": "рофлить",
  
  // Формы "флексить"
  "флексил": "флексить",
  "флексила": "флексить",
  "флексило": "флексить",
  "флексили": "флексить",
  "флекшу": "флексить",
  "флексишь": "флексить",
  "флексит": "флексить",
  "флексим": "флексить",
  "флексите": "флексить",
  "флексят": "флексить",
  "флекси": "флексить",  // повелительное наклонение
  "пофлексить": "флексить",
  
  // Формы "хейтить"
  "хейтил": "хейтить",
  "хейтила": "хейтить",
  "хейтило": "хейтить",
  "хейтили": "хейтить",
  "хейчу": "хейтить",
  "хейтишь": "хейтить",
  "хейтит": "хейтить",
  "хейтим": "хейтить",
  "хейтите": "хейтить",
  "хейтят": "хейтить",
  "хейть": "хейтить",  // повелительное наклоне��ие
  "похейтить": "хейтить",
  "хейтер": "хейтить",
  "хейтеры": "хейтить",
  "хейтеров": "хейтить",
  
  // Формы "агриться"
  "агрился": "агриться",
  "агрилась": "агриться",
  "агрилось": "агриться",
  "агрились": "агриться",
  "агрюсь": "агриться",
  "агришься": "агриться",
  "агрится": "агриться",
  "агримся": "агриться",
  "агритесь": "агриться",
  "агрятся": "агриться",
  "агрись": "агриться",  // повелительное наклонение
  "заагриться": "агриться",
  
  // Формы "стримить"
  "стримил": "стримить",
  "стримила": "стримить",
  "стримило": "стримить",
  "стримили": "стримить",
  "стримлю": "стримить",
  "стримишь": "стримить",
  "стримит": "стримить",
  "стримим": "стримить",
  "стримите": "стримить",
  "стримят": "стримить",
  
  // Формы "донатить"
  "донатил": "донатить",
  "донатила": "донатить",
  "донатило": "донатить",
  "донатили": "донатить",
  "доначу": "донатить",
  "донатишь": "донатить",
  "донатит": "донатить",
  "донатим": "донатить",
  "донатите": "донатить",
  "донатят": "донатить",
  "задонатил": "донатить",
  "задонатила": "донатить",
  "задонатили": "донатить",
  
  // Формы "троллить"
  "троллил": "троллить",
  "троллила": "троллить",
  "троллило": "троллить",
  "троллили": "троллить",
  "троллю": "троллить",
  "троллишь": "троллить",
  "троллит": "троллить",
  "троллим": "троллить",
  "троллите": "троллить",
  "троллят": "троллить",
  "тролль": "троллить",  // повелительное наклонение
  "потроллить": "троллить",
  "затроллить": "троллить",
  
  // Формы "шипперить"
  "шипперил": "шипперить",
  "шипперила": "шипперить",
  "шипперило": "шипперить",
  "шипперили": "шипперить",
  "шипперю": "шипперить",
  "шипперишь": "шипперить",
  "шипперит": "шипперить",
  "шипперим": "шипперить",
  "шипперите": "шипперить",
  "шипперят": "шипперить",
  
  // Формы "хайпить"
  "хайпил": "хайпить",
  "хайпила": "хайпить",
  "хайпило": "хайпить",
  "хайпили": "хайпить",
  "хайплю": "хайпить",
  "хайпишь": "хайпить",
  "хайпит": "хайпить",
  "хайпим": "хайпить",
  "хайпите": "хайпить",
  "хайпят": "хайпить",
  
  // Формы существительного "краш"
  "краша": "краш",
  "крашу": "краш",
  "крашем": "краш",
  "краше": "краш",
  "крашей": "краш",
  "крашах": "краш",
  "краши": "краш",
  "крашей": "краш",
  "крашами": "краш",
  
  // Формы "вайб"
  "вайба": "вайб",
  "вайбу": "вайб",
  "вайбом": "вайб",
  "вайбе": "вайб",
  "вайбы": "вайб",
  "вайбов": "вайб",
  "��айбам": "вайб",
  "вайбами": "вайб",
  "вайбах": "вайб",
  
  // Формы "кринж"
  "кринжа": "кринж",
  "кринжу": "кринж",
  "кринжем": "кринж",
  "кринже": "кринж",
  "кринжи": "кринж",
  
  // Формы "батхёрт"
  "батхёрта": "батхёрт",
  "батхёрту": "батхёрт",
  "батхёртом": "батхёрт",
  "батхёрте": "батхёрт",
  "батхёрты": "батхёрт",
  
  // Формы "токсик"
  "токсика": "токсик",
  "токсику": "токсик",
  "токсиком": "токсик",
  "токсике": "токсик",
  "токсики": "токсик",
  "токсиков": "токсик",
  "токсикам": "токсик",
  "токсиками": "токсик",
  "токсиках": "токсик",
  
  // Формы "зумер"
  "зумера": "зумер",
  "зумеру": "зумер",
  "зумером": "зумер",
  "зумере": "зумер",
  "зумеры": "зумер",
  "зумеров": "зумер",
  "зумерам": "зумер",
  "зумерами": "зумер",
  "зумерах": "зумер",
  
  // Формы "бумер"
  "бумера": "бумер",
  "бумеру": "бумер",
  "бумером": "бумер",
  "бумере": "бумер",
  "бумеры": "бумер",
  "бумеров": "бумер",
  "бумерам": "бумер",
  "бумерами": "бумер",
  "бумерах": "бумер",
  
  // Формы "рандом"
  "рандома": "рандом",
  "рандому": "рандом",
  "рандомом": "рандом",
  "рандоме": "рандом",
  "рандомы": "рандом",
  
  // Формы "спойлер"
  "спойлера": "спойлер",
  "спойлеру": "спойлер",
  "спойлером": "спойлер",
  "спойлере": "спойлер",
  "спойлеры": "спойлер",
  "спойлеров": "спойлер",
  "спойлерам": "спойлер",
  "спойлерами": "спойлер",
  "спойлерах": "спойлер",
  
  // Формы "пранк"
  "пранка": "пранк",
  "пранку": "пранк",
  "пранком": "пранк",
  "пранке": "пранк",
  "пранки": "пранк",
  "пранков": "пранк",
  "пранкам": "пранк",
  "пранками": "пранк",
  "пранках": "пранк",
  
  // Формы "мем"
  "мема": "мем",
  "мему": "мем",
  "мемом": "мем",
  "меме": "мем",
  "мемы": "мем",
  "мемов": "мем",
  "мемам": "мем",
  "мемами": "мем",
  "мемах": "мем",
  
  // Формы "мемас"
  "мемаса": "мемас",
  "мемасу": "мемас",
  "мемасом": "мемас",
  "мемасе": "мемас",
  "мемасы": "мемас",
  
  // Формы "хайп"
  "хайпа": "хайп",
  "хайпу": "хайп",
  "хайпом": "хайп",
  "хайпе": "хайп",
  "хайпы": "хайп",
  
  // Формы "нуб"
  "нуба": "нуб",
  "нубу": "нуб",
  "нубом": "нуб",
  "нубе": "нуб",
  "нубы": "нуб",
  "нубов": "нуб",
  "нубам": "нуб",
  "нубами": "нуб",
  "нубах": "нуб",
  
  // Формы "лаг"
  "лага": "лаг",
  "лагу": "лаг",
  "лагом": "лаг",
  "лаге": "лаг",
  "лаги": "лаг",
  "лагов": "лаг",
  "лагам": "лаг",
  "лагами": "лаг",
  "лагах": "лаг",
  
  // Формы "читер"
  "читера": "читер",
  "читеру": "читер",
  "читером": "читер",
  "читере": "читер",
  "читеры": "читер",
  "читеров": "читер",
  "читерам": "читер",
  "читерами": "читер",
  "читерах": "читер",
  
  // Формы "тильт"
  "тильта": "тильт",
  "тильту": "тильт",
  "тильтом": "тильт",
  "тильте": "тильт",
  "тильты": "тильт",
  
  // Формы "фанбой"
  "фанбоя": "фанбой",
  "фанбою": "фанбой",
  "фанбоем": "фанбой",
  "фанбое": "фанбой",
  "фанбои": "фанбой",
  "фанбоев": "фанбой",
  "фанбоям": "фанбой",
  "фанбоями": "фанбой",
  "фанбоях": "фанбой",
  
  // Формы прилагательного "сасный"
  "сасного": "сасный",
  "сасному": "сасный",
  "сасным": "сасный",
  "сасном": "сасный",
  "сасная": "сасный",
  "сасной": "сасный",
  "сасную": "сасный",
  "сасное": "сасный",
  "сасные": "сасный",
  "сасных": "сасный",
  "сасными": "сасный",
  
  // Формы прилагательного "годный"
  "годного": "годный",
  "годному": "годный",
  "годным": "годный",
  "годном": "годный",
  "годная": "годный",
  "годной": "годный",
  "годную": "годный",
  "годное": "годный",
  "годные": "годный",
  "годных": "годный",
  "годными": "годный",
  
  // Формы "годнота"
  "годноты": "годнота",
  "годноте": "годнота",
  "годноту": "годнота",
  "годнотой": "годнота",
  
  // Формы прилагательного "душный"
  "душного": "душный",
  "душному": "душный",
  "душным": "душный",
  "душном": "душный",
  "душная": "душный",
  "душной": "душный",
  "душную": "душный",
  "душное": "душный",
  "душные": "душный",
  "душных": "душный",
  "душными": "душный",
  
  // Формы прилагательного "токсичный"
  "токсичного": "токсичный",
  "токсичному": "токсичный",
  "токсичным": "токсичный",
  "токсичном": "токсичный",
  "токсичная": "токсичный",
  "токсичной": "токсичный",
  "токсичную": "токсичный",
  "токсичное": "токсичный",
  "токсичные": "токсичный",
  "токсичных": "токсичный",
  "токсичными": "токsичный",
  
  // Русские слова - глагол "отдыхать"
  "отдыхал": "отдыхать",
  "отдыхала": "отдыхать",
  "отдыхало": "отдыхать",
  "отдыхали": "отдыхать",
  "отдыхаю": "отдыхать",
  "отдыхаешь": "отдыхать",
  "отдыхает": "отдыхать",
  "отдыхаем": "отдыхать",
  "отдыхаете": "отдыхать",
  "отдыхают": "отдыхать",
  "отдыхай": "отдыхать",  // повелительное наклонение
  "отдыхайте": "отдыхать",
  
  // Формы "расслабляться"
  "расслаблялся": "расслабляться",
  "расслаблялась": "расслабляться",
  "расслаблялось": "расслабляться",
  "расслаблялись": "расслабляться",
  "расслабляюсь": "расслабляться",
  "расслабляешься": "расслабляться",
  "расслабляется": "расслабляться",
  "расслабляемся": "расслабляться",
  "расслабляетесь": "расслабляться",
  "расслабляются": "расслабляться",
  
  // Формы наречия "грустно"
  "грустного": "грустно",
  "грустному": "грустно",
  
  // Формы существительного "обида"
  "обиды": "обида",
  "обиде": "обида",
  "обиду": "обида",
  "обидой": "обида",
  "обид": "обида",
  "обидам": "обида",
  "обидами": "обида",
  "обидах": "обида",
  
  // Формы наречия "плохо"
  "плохого": "плохо",
  "плохому": "плохо",
  
  // Формы наречия "смешно"
  "смешного": "смешно",
  "смешному": "смешно",
  
  // Формы "смеяться"
  "смеялся": "смеяться",
  "смеялась": "смеяться",
  "смеялось": "смеяться",
  "смеялись": "смеяться",
  "смеюсь": "смеяться",
  "смеешься": "смеяться",
  "смеется": "с��еяться",
  "смеемся": "смеяться",
  "смеетесь": "смеяться",
  "смеются": "смеяться",
  "смейся": "смеяться",  // повелительное наклонение
  "смейтесь": "смеяться",
  
  // Формы "хвастаться"
  "хвастался": "хвастаться",
  "хвасталась": "хвастаться",
  "хвасталось": "хвастаться",
  "хвастались": "хвастаться",
  "хвастаюсь": "хвастаться",
  "хвастаешься": "хвастаться",
  "хвастается": "хвастаться",
  "хвастаемся": "хвастаться",
  "хвастаетесь": "хвастаться",
  "хвастаются": "хвастаться",
  "хвастайся": "хвастаться",  // повелительное наклонение
  "хвастайтесь": "хвастаться",
  
  // Формы "атмосфера"
  "атмосферы": "атмосфера",
  "атмосфере": "атмосфера",
  "атмосферу": "атмосфера",
  "атмосферой": "атмосфера",
  "атмосфер": "атмосфера",
  "атмосферам": "атмосфера",
  "атмосферами": "атмосфера",
  "атмосферах": "атмосфера",
  
  // Формы "ненавидеть"
  "ненавидел": "ненавидеть",
  "ненавидела": "ненавидеть",
  "ненавидело": "ненавидеть",
  "ненавидели": "ненавидеть",
  "ненавижу": "ненавидеть",
  "ненавидишь": "ненавидеть",
  "ненавидит": "ненавидеть",
  "ненавидим": "ненавидеть",
  "ненавидите": "ненавидеть",
  "ненавидят": "ненавидеть",
  
  // Формы "злиться"
  "злился": "злиться",
  "злилась": "злиться",
  "злилось": "злиться",
  "злились": "злиться",
  "злюсь": "злиться",
  "злишься": "злиться",
  "злится": "злиться",
  "злимся": "злиться",
  "злитесь": "злиться",
  "злятся": "злиться",
  "злись": "злиться",  // повелительное наклонение
  "злитесь": "злиться",
  
  // Формы "провоцировать"
  "провоцировал": "провоцировать",
  "провоцировала": "провоцировать",
  "провоцировало": "провоцировать",
  "провоцировали": "провоцировать",
  "провоцирую": "провоцировать",
  "провоцируешь": "провоцировать",
  "провоцирует": "провоцировать",
  "провоцируем": "провоцировать",
  "провоцируете": "провоцировать",
  "провоцируют": "провоцировать",
  
  // Формы "популярность"
  "популярности": "популярность",
  "популярностью": "популярность",
  
  // Формы существительного "новичок"
  "новичка": "новичок",
  "новичку": "новичок",
  "новичком": "новичок",
  "новичке": "новичок",
  "новички": "новичок",
  "новичков": "новичок",
  "новичкам": "новичок",
  "новичками": "новичок",
  "новичках": "новичок",
  
  // Формы "профессионал"
  "профессионала": "профессионал",
  "профессионалу": "профессионал",
  "профессионалом": "профессионал",
  "профессионале": "профессионал",
  "профессионалы": "профессионал",
  "профессионалов": "профессионал",
  "профессионалам": "профессионал",
  "профессионалами": "профессионал",
  "профессионалах": "профессионал",
  
  // Формы "задержка"
  "задержки": "задержка",
  "задержке": "задержка",
  "задержку": "задержка",
  "задержкой": "задержка",
  "задержек": "задержка",
  "задержкам": "задержка",
  "задержками": "задержка",
  "задержках": "задержка",
  
  // Формы прилагательного "красивый"
  "красивого": "красивый",
  "красивому": "красивый",
  "красивым": "красивый",
  "красивом": "красивый",
  "красивая": "красивый",
  "красивой": "красивый",
  "красивую": "красивый",
  "красивое": "красивый",
  "красивые": "красивый",
  "красивых": "красивый",
  "красивыми": "красивый",
  
  // Формы "шутка"
  "шутки": "шутка",
  "шутке": "шутка",
  "шутку": "шутка",
  "шуткой": "шутка",
  "шуток": "шутка",
  "шуткам": "шутка",
  "шутками": "шутка",
  "шутках": "шутка",
  
  // Формы "розыгрыш"
  "розыгрыша": "розыгрыш",
  "розыгрышу": "розыгрыш",
  "розыгрышем": "розыгрыш",
  "розыгрыше": "розыгрыш",
  "розыгрыши": "розыгрыш",
  "розыгрышей": "розыгрыш",
  "розыгрышам": "розыгрыш",
  "розыгрышами": "розыгрыш",
  "розыгрышах": "розыгрыш",
  
  // Дополнительные формы наречий и кратких прилагательных
  "легка": "легко",
  "легки": "легко",
  "легки": "��егко",
  
  // Формы "баян"
  "баяна": "баян",
  "баяну": "баян",
  "баяном": "баян",
  "баяне": "баян",
  "баяны": "баян",
  "баянов": "баян",
  "баянам": "баян",
  "баянами": "баян",
  "баянах": "баян",
  
  // Формы "бан"
  "бана": "бан",
  "бану": "бан",
  "баном": "бан",
  "бане": "бан",
  "баны": "бан",
  "банов": "бан",
  "банам": "бан",
  "банами": "бан",
  "банах": "бан",
  
  // Формы "имба"
  "имбы": "имба",
  "имбе": "имба",
  "имбу": "имба",
  "имбой": "имба",
  
  // Формы прилагательного "имбалансный" (имба как прилагательное)
  "имбовый": "имба",
  "имбового": "имба",
  "имбовому": "имба",
  "имбовым": "имба",
  "имбовом": "имба",
  "имбовая": "имба",
  "имбовой": "имба",
  "имбовую": "имба",
  "имбовое": "имба",
  "имбовые": "имба",
  "имбовых": "имба",
  "имбовыми": "имба",
  
  // Формы прилагательного "рандомный"
  "рандомный": "рандом",
  "рандомного": "рандом",
  "рандомному": "рандом",
  "рандомным": "рандом",
  "рандомном": "рандом",
  "ра��домная": "рандом",
  "рандомной": "рандом",
  "рандомную": "рандо��",
  "рандомное": "рандом",
  "рандомные": "рандом",
  "рандомных": "рандом",
  "рандомными": "рандом",
  
  // Дополнительные глагольные формы для "кекать"
  "кекать": "кек",
  "кекал": "кек",
  "кекала": "кек",
  "кекали": "кек",
  "кекаю": "кек",
  "кекаешь": "кек",
  "кекает": "кек",
  "кекаем": "кек",
  "кекаете": "кек",
  "кекают": "кек",
  "кекнул": "кек",
  "кекнула": "кек",
  "кекнули": "кек",
  
  // Формы "орать"
  "орать": "ору",
  "орал": "ору",
  "орала": "ору",
  "орали": "ору",
  "ору": "ору",
  "орешь": "ору",
  "орет": "ору",
  "орем": "ору",
  "орете": "ору",
  "орут": "ору",
  
  // Глагольные формы "лагать"
  "лагать": "лаг",
  "лагал": "лаг",
  "лагала": "лаг",
  "лагали": "лаг",
  "лагаю": "лаг",
  "лагаешь": "лаг",
  "лагает": "лаг",
  "лагаем": "лаг",
  "лагаете": "лаг",
  "лагают": "лаг",
  
  // Формы "симпатия"
  "симпатии": "симпатия",
  "симпатию": "симпатия",
  "симпатией": "симпатия",
  "симпатий": "симпатия",
  "симпатиям": "симпатия",
  "симпатиями": "симпатия",
  "симпатиях": "симпатия",
  
  // Дополнительные формы для "нравится"
  "нравился": "нравится",
  "нравилась": "��равится",
  "нравилось": "нравится",
  "нравились": "нравится",
  "нравлюсь": "нравится",
  "нравишься": "нравится",
  "нравятся": "нравится",
  "нравимся": "нравится",
  "нравитесь": "нравится",
  
  // Формы прилагательного "неловкий"
  "неловкий": "неловко",
  "неловкого": "неловко",
  "неловкому": "неловко",
  "неловким": "неловко",
  "неловком": "неловко",
  "неловкая": "неловко",
  "неловкой": "неловко",
  "неловкую": "неловко",
  "неловкое": "неловко",
  "неловкие": "неловко",
  "неловких": "неловко",
  "неловкими": "неловко",
  
  // Формы прилагательного "скучный"
  "скучного": "скучный",
  "скучному": "скучный",
  "скучным": "скучный",
  "скучном": "скучный",
  "скучная": "скучный",
  "скучной": "скучный",
  "скучную": "скучный",
  "скучное": "скучный",
  "скучные": "скучный",
  "скучных": "скучный",
  "скучными": "скучный",
  
  // Формы прилагательного "неприятный"
  "неприятного": "неприятный",
  "неприятному": "неприятный",
  "неприятным": "неприятный",
  "неприятном": "неприятный",
  "неприятная": "неприятный",
  "неприятной": "неприятный",
  "неприятную": "неприятный",
  "неприятное": "неприятный",
  "неприятные": "неприятный",
  "неприятных": "неприятный",
  "неприятными": "неприятный",
  
  // Формы прилагательного "качественный"
  "качественный": "качественно",
  "качественного": "качественно",
  "качественному": "качественно",
  "качественным": "качественно",
  "качественном": "качественно",
  "качественная": "качественно",
  "качественной": "качественно",
  "качественную": "качественно",
  "качественное": "качественно",
  "качественные": "качественно",
  "качественных": "качественно",
  "качественными": "качественно",
  
  // Дополнительные формы с префиксами для глагола "чилить"
  "зачилить": "чилить",
  "зачилил": "чилить",
  "зачилила": "чилить",
  "зачилили": "чилить",
  "начилить": "чилить",
  "начилил": "чилить",
  "начилила": "чилить",
  
  // Формы "батхёртить" (глагол от батхёрт)
  "батхёртить": "батхёрт",
  "батхёртил": "батхёрт",
  "батхёртила": "батхёрт",
  "батхёртили": "батхёрт",
  "батхёрчу": "батхёрт",
  "батхёртишь": "батхёрт",
  "батхёртит": "батхёрт",
  "батхёртим": "батхёрт",
  "батхёртите": "батхёрт",
  "батхёртят": "батхёрт",
  
  // Формы "кринжовать"
  "кринжовать": "кринж",
  "кринжовал": "кринж",
  "кринжовала": "кринж",
  "кринжовали": "кринж",
  "кринжую": "кринж",
  "кринжуешь": "кринж",
  "кринжует": "кринж",
  "кринжуем": "кринж",
  "кринжуете": "кринж",
  "кринжуют": "кринж",
  
  // Формы прилагательного "кринжовый"
  "кринжовый": "кринж",
  "кринжового": "кринж",
  "кринжовому": "кринж",
  "кринжовым": "кринж",
  "кринжовом": "кринж",
  "кринжовая": "кринж",
  "кринжовой": "кринж",
  "кринжовую": "кринж",
  "кринжовое": "кринж",
  "кринжовые": "кринж",
  "кринжовых": "кринж",
  "кринжовыми": "кринж",
  
  // Формы с префиксами для "отдыхать"
  "поотдыхать": "отдыхать",
  "поотдыхал": "отдыхать",
  "поотдыхала": "отдыхать",
  "поотдыхали": "отдыхать",
  
  // Формы с префиксами для "расслабляться"
  "порасслабляться": "расслабляться",
  "порасслаблялся": "расслабляться",
  "порасслаблялась": "расслабляться",
  
  // Формы "посмеяться"
  "посмеяться": "смеяться",
  "посмеялся": "смеяться",
  "посмеялась": "смеяться",
  "посмеялись": "смеяться",
  
  // Формы "похвастаться"
  "похвастаться": "хвастаться",
  "похвастался": "хвастаться",
  "похвасталась": "хвастаться",
  "похвастались": "хвастаться",
  
  // Формы числительных и других вариантов
  "обижен": "обида",
  "обижена": "обида",
  "обижено": "обида",
  "обижены": "обида",
  
  // Формы "симпатичный"
  "симпа��ичный": "симпатия",
  "симпатичного": "симпатия",
  "симпатичному": "симпатия",
  "симпатичным": "симпатия",
  "симпатичном": "симпатия",
  "симпатичная": "симпатия",
  "симпатичной": "симпатия",
  "симпатичную": "симпатия",
  "симпатичное": "симпатия",
  "симпатичные": "симпатия",
  "симпатичных": "симпатия",
  "симпатичными": "симпатия",
};

// Mock dictionary data - Slang to Russian
const dictionary: Record<string, DictionaryEntry> = {
  "чилить": {
    word: "Чилить",
    definition: "Отдыхать, расслабляться, проводить время в спокойной обстановке без стресса и напряжения.",
    shortTranslation: "отдыхать",
    examples: [
      "Сегодня весь день чилил дома, смотрел сериалы",
      "Давай встретимся и просто почилим в парке"
    ],
    category: "Общение"
  },
  "скучно": {
    word: "Скучно",
    definition: "Грустно, печально. В молодежном сленге используется для выражения эмоций грусти или тоски.",
    shortTranslation: "грустно",
    examples: [
      "Мне так скучно без тебя",
      "Погода скучная, настроение тоже"
    ],
    category: "Эмоции"
  },
  "батхёрт": {
    word: "Батхёрт",
    definition: "Обида, досада, болезненная реакция на критику или неудачу. От английского 'butthurt'.",
    shortTranslation: "обида",
    examples: [
      "У него полный батхёрт после вчерашнего спора",
      "Не надо батхёртить по каждому поводу"
    ],
    category: "Эмоции"
  },
  "криво": {
    word: "Криво",
    definition: "Неправильно, плохо, некачественно. Что-то сделано не так, как нужно.",
    shortTranslation: "плохо",
    examples: [
      "Эта программа работает криво",
      "Он криво перевел текст"
    ],
    category: "Общение"
  },
  "лол": {
    word: "Лол",
    definition: "Смешно, потешно. Сокращение от 'LOL' (Laughing Out Loud) - громко смеюсь.",
    shortTranslation: "смешно",
    examples: [
      "Лол, это очень смешно!",
      "Посмотри это видео, там лол"
    ],
    category: "Интернет"
  },
  "баян": {
    word: "Баян",
    definition: "Старая шутка или новость, которую все уже видели. Надоевшая, избитая история.",
    shortTranslation: "боян",
    examples: [
      "Это баян, эту шутку все знают",
      "Опять баян публикуешь?"
    ],
    category: "Интернет"
  },
  "рофлить": {
    word: "Рофлить",
    definition: "Смеяться, шутить, веселиться. От 'ROFL' (Rolling On Floor Laughing).",
    shortTranslation: "смеяться",
    examples: [
      "Мы весь вечер рофлили над мемами",
      "Перестань рофлить, это серьезно"
    ],
    category: "Интернет"
  },
  "краш": {
    word: "Краш",
    definition: "Объект симпатии, влюбленности. Человек, который очень нравится.",
    shortTranslation: "симпатия",
    examples: [
      "Он мой краш уже полгода",
      "Познакомь меня со своим крашем"
    ],
    category: "Отношения"
  },
  "флексить": {
    word: "Флексить",
    definition: "Хвастаться, выпендриваться, показывать свои достижения или вещи.",
    shortTranslation: "хвастаться",
    examples: [
      "Он постоянно флексит новыми кроссовками",
      "Хватит флексить своими оценками"
    ],
    category: "Стиль жизни"
  },
  "вайб": {
    word: "Вайб",
    definition: "Атмосфера, настроение, общее ощущение от места, события или человека. От английского 'vibe'.",
    shortTranslation: "атмосфера",
    examples: [
      "Здесь классный вайб",
      "У этой песни летний вайб"
    ],
    category: "Стиль жизни"
  },
  "кринж": {
    word: "Кринж",
    definition: "Что-то очень неловкое, стыдное, вызывающее дискомфорт. Испанский стыд.",
    shortTranslation: "неловко",
    examples: [
      "Это такой кринж, я не могу на это смотреть",
      "Его поведение было полным кринжем"
    ],
    category: "Эмоции"
  },
  "токсик": {
    word: "Токсик",
    definition: "Токсичный человек, неприятный в общении, распространяющий негатив.",
    shortTranslation: "токсичный",
    examples: [
      "Он полный токсик, лучше с ним не общаться",
      "В этой игре слишком много токсиков"
    ],
    category: "Общение"
  },
  "хейтить": {
    word: "Хейтить",
    definition: "Ненавидеть, критиковать, испытывать неприязнь. От английского 'hate'.",
    shortTranslation: "ненавидеть",
    examples: [
      "Зачем ты его хейтишь?",
      "Хейтеры всегда будут хейтить"
    ],
    category: "Общение"
  },
  "агриться": {
    word: "Агриться",
    definition: "Злиться, раздражаться, быть в плохом настроении. От английского 'aggressive'.",
    shortTranslation: "злиться",
    examples: [
      "Не агрись, это всего лишь игра",
      "Он всегда агрится по мелочам"
    ],
    category: "Эмоции"
  },
  "зумер": {
    word: "Зумер",
    definition: "Представитель поколения Z, рожденный в конце 1990-х - начале 2010-х.",
    shortTranslation: "молодежь",
    examples: [
      "Типичный зумер, постоянно в телефоне",
      "Зумеры не знают мир без интернета"
    ],
    category: "Общение"
  },
  "бумер": {
    word: "Бумер",
    definition: "Человек старшего поколения, не понимающий современных технологий и трендов.",
    shortTranslation: "старик",
    examples: [
      "Ок, бумер, как скажешь",
      "Не будь бумером, попробуй разобраться"
    ],
    category: "Общение"
  },
  "изи": {
    word: "Изи",
    definition: "Легко, просто, без усилий. От английского 'easy'.",
    shortTranslation: "легко",
    examples: [
      "Это задание изи, справлюсь за минуту",
      "Изи катка, мы выиграли"
    ],
    category: "Игры"
  },
  "го": {
    word: "Го",
    definition: "Пойдем, давай, приглашение к действию. От английского 'go'.",
    shortTranslation: "пойдем",
    examples: [
      "Го играть в футбол",
      "Го в кино сегодня вечером"
    ],
    category: "Общение"
  },
  "рандом": {
    word: "Рандом",
    definition: "Случайность, что-то непредсказуемое. От английского 'random'.",
    shortTranslation: "случайность",
    examples: [
      "Это был полный рандом",
      "Выбери рандомную песню"
    ],
    category: "Игры"
  },
  "спойлер": {
    word: "Спойлер",
    definition: "Информация, раскрывающая сюжет фильма, книги или игры заранее.",
    shortTranslation: "раскрытие",
    examples: [
      "Не говори спойлеры, я еще не смотрел!",
      "Ты мне весь фильм заспойлерил"
    ],
    category: "Медиа"
  },
  "стримить": {
    word: "Стримить",
    definition: "Вести прямую трансляцию в интернете.",
    shortTranslation: "транслировать",
    examples: [
      "Сегодня буду стримить игру",
      "Он каждый день стримит на Твиче"
    ],
    category: "Медиа"
  },
  "донатить": {
    word: "Донатить",
    definition: "Отправлять денежные пожертвования стримеру или создателю контента.",
    shortTranslation: "жертвовать",
    examples: [
      "Я задонатил своему любимому стримеру",
      "Спасибо всем, кто донатит!"
    ],
    category: "Медиа"
  },
  "пранк": {
    word: "Пранк",
    definition: "Розыгрыш, шутка над кем-то. От английского 'prank'.",
    shortTranslation: "розыгрыш",
    examples: [
      "Это был эпичный пранк над другом",
      "Давай заснимем пранк для ютуба"
    ],
    category: "Медиа"
  },
  "троллить": {
    word: "Троллить",
    definition: "Специально провоцировать, дразнить или обманывать кого-то ради смеха.",
    shortTranslation: "провоцировать",
    examples: [
      "Он любит троллить людей в комментариях",
      "Перестань меня троллить!"
    ],
    category: "Общение"
  },
  "шипперить": {
    word: "Шипперить",
    definition: "Желать, чтобы два человека были вместе, поддерживать романтическую пару.",
    shortTranslation: "сводить",
    examples: [
      "Я их шипперю с первого сезона",
      "Все шипперят этих персонажей"
    ],
    category: "Отношения"
  },
  "сасный": {
    word: "Сасный",
    definition: "Очень красивый, привлекательный. Искаженное 'сексуальный'.",
    shortTranslation: "красивый",
    examples: [
      "Он такой сасный парень",
      "Сасная фотка, выложи в инсту"
    ],
    category: "Стиль жизни"
  },
  "годнота": {
    word: "Годнота",
    definition: "Качественный, хороший контент или продукт.",
    examples: [
      "Этот фильм - на��тоящая годнота",
      "Где найти такую годноту?"
    ],
    category: "Стиль жизни"
  },
  "годный": {
    word: "Годный",
    definition: "Качественный, хороший, стоящий внимания.",
    examples: [
      "Годный контент на канале",
      "Это годная идея"
    ],
    category: "Стиль жизни"
  },
  "душный": {
    word: "Душный",
    definition: "Скучный, занудный человек или ситуация.",
    examples: [
      "Такой душный препод",
      "Не будь душным, расслабься"
    ],
    category: "Общение"
  },
  "фанбой": {
    word: "Фанбой",
    definition: "Ярый поклонник чего-либо или кого-либо.",
    examples: [
      "Он фанбой Apple",
      "Типичный фанбой этой группы"
    ],
    category: "Медиа"
  },
  "хайп": {
    word: "Хайп",
    definition: "Ажиотаж, популярность, шумиха вокруг чего-либо.",
    examples: [
      "Вокруг этого фильма такой хайп",
      "Это просто хайп, скоро забудут"
    ],
    category: "Медиа"
  },
  "хайпить": {
    word: "Хайпить",
    definition: "Создавать ажиотаж, пользоваться популярностью темы.",
    examples: [
      "Он хайпит на скандале",
      "Блогеры хайпят на этой новости"
    ],
    category: "Медиа"
  },
  "мем": {
    word: "Мем",
    definition: "Шутка, картинка или видео, которые быстро распространяются в интернете.",
    examples: [
      "Этот мем уже видели все",
      "Скинь смешной мем"
    ],
    category: "Интернет"
  },
  "мемас": {
    word: "Мемас",
    definition: "Уменьшительное от 'мем', милое название для смешной картинки.",
    examples: [
      "Какой смешной мемас",
      "Глянь, какой мемас нашел"
    ],
    category: "Интернет"
  },
  "ору": {
    word: "Ору",
    definition: "Очень смешно, сильно смеюсь.",
    examples: [
      "Ору с этого видео",
      "Не могу, ору!"
    ],
    category: "Интернет"
  },
  "кек": {
    word: "Кек",
    definition: "Смех, смешно. Аналог 'лол'.",
    examples: [
      "Кек, это смешно",
      "Кекнул с твоей шутки"
    ],
    category: "Интернет"
  },
  "имба": {
    word: "Имба",
    definition: "Что-то очень сильное, несбалансированное. От 'imbalanced'.",
    examples: [
      "Этот персонаж имба",
      "Имба оружие в игре"
    ],
    category: "Игры"
  },
  "нуб": {
    word: "Нуб",
    definition: "Новичок, неопытный игрок. От 'newbie'.",
    examples: [
      "Ты играешь как нуб",
      "Нубы испортили катку"
    ],
    category: "Игры"
  },
  "про": {
    word: "Про",
    definition: "Профессионал, опытный игрок.",
    examples: [
      "Он настоящий про",
      "Играет как про-игрок"
    ],
    category: "Игры"
  },
  "лаг": {
    word: "Лаг",
    definition: "Задержка, зависание в игре или программе.",
    examples: [
      "У меня лаги, не могу играть",
      "Сервер лагает"
    ],
    category: "Игры"
  },
  "читер": {
    word: "Читер",
    definition: "Игрок, использующий читы для нечестной игры.",
    examples: [
      "Это точно читер",
      "Читеры испортили игру"
    ],
    category: "Игры"
  },
  "тильт": {
    word: "Тильт",
    definition: "Состояние фрустрации и злости из-за проигрышей.",
    examples: [
      "Я на тильте после этой катки",
      "Не играй на тильте"
    ],
    category: "Игры"
  },
  "гг": {
    word: "ГГ",
    definition: "Хорошая игра. От 'good game'.",
    examples: [
      "ГГ, хорошо сыграли",
      "ГГ ВП (хорошо сыграли, молодцы)"
    ],
    category: "Игры"
  },
  "афк": {
    word: "АФК",
    definition: "Отошел от компьютера. От 'away from keyboard'.",
    examples: [
      "Я афк на 5 минут",
      "Не начинайте, я афк"
    ],
    category: "Игры"
  },
  "бан": {
    word: "Бан",
    definition: "Блокировка пользователя или доступа.",
    examples: [
      "Получил бан на форуме",
      "Админ выдал бан"
    ],
    category: "Игры"
  },
  "вписка": { word: "Вписка", definition: "Вечеринка, тусовка у кого-то дома.", shortTranslation: "тусовка", examples: ["Сегодня у нас вписка", "Лучшая вписка"], category: "Стиль жизни" },
  "зашквар": { word: "Зашквар", definition: "Что-то позорное, неприятное.", shortTranslation: "позор", examples: ["Это зашквар", "Носить такое - зашквар"], category: "Общение" },
  "шеймить": { word: "Шеймить", definition: "Стыдить, осуждать.", shortTranslation: "стыдить", examples: ["Не шеймить меня", "Они шеймят"], category: "Общение" },
  "фолловить": { word: "Фолловить", definition: "Подписываться в соцсетях.", shortTranslation: "подписаться", examples: ["Фоллоу его", "Зафолловь канал"], category: "Интернет" },
  "лайкать": { word: "Лайкать", definition: "Ставить лайк.", shortTranslation: "нравиться", examples: ["Лайкни фото", "Он лайкает посты"], category: "Интернет" },
  "постить": { word: "Постить", definition: "Публиковать контент.", shortTranslation: "публиковать", examples: ["Запости фото", "Постит сторис"], category: "Интернет" },
  "респавн": { word: "Респавн", definition: "Возрождение в игре.", shortTranslation: "возрождение", examples: ["Жду респавна", "Респавн через 30 сек"], category: "Игры" },
  "фармить": { word: "Фармить", definition: "Добывать ресурсы в игре.", shortTranslation: "добывать", examples: ["Фармлю голду", "Пошел фармить"], category: "Игры" },
  "фарм": { word: "Фарм", definition: "Добыча ресурсов в игре.", shortTranslation: "добыча", examples: ["Пошел на фарм", "Хороший фарм"], category: "Игры" },
  "скилл": { word: "Скилл", definition: "Навык, умение.", shortTranslation: "навык", examples: ["Хороший скилл", "Прокачай скиллы"], category: "Игры" },
  "кастить": { word: "Кастить", definition: "Использовать заклинание.", shortTranslation: "колдовать", examples: ["Касти скилл!", "Он кастит"], category: "Игры" },
  "каст": { word: "Каст", definition: "Применение заклинания.", shortTranslation: "заклинание", examples: ["Успешный каст", "Прервали каст"], category: "Игры" },
  "керри": { word: "Керри", definition: "Игрок, который тащит команду.", shortTranslation: "лидер", examples: ["Он керри команды", "Керри не фармит"], category: "Игры" },
  "танк": { word: "Танк", definition: "Персонаж с большим запасом здоровья.", shortTranslation: "защитник", examples: ["Нам нужен танк", "Танк идет первым"], category: "Игры" },
  "хилер": { word: "Хилер", definition: "Персонаж, который лечит союзников.", shortTranslation: "лекарь", examples: ["Хилер, лечи!", "Два хилера"], category: "Игры" },
  "хилить": { word: "Хилить", definition: "Лечить, восстанавливать здоровье.", shortTranslation: "лечить", examples: ["Хили танка!", "Не могу хилить"], category: "Игры" },
  "дрип": { word: "Дрип", definition: "Стильная, модная одежда.", shortTranslation: "стиль", examples: ["Крутой дрип", "С дрипом вышел"], category: "Стиль жизни" },
  "аутфит": { word: "Аутфит", definition: "Комплект одежды, образ.", shortTranslation: "образ", examples: ["Классный аутфит", "Новый аутфит"], category: "Стиль жизни" },
  "луки": { word: "Луки", definition: "Внешний вид, образы.", shortTranslation: "образы", examples: ["Показываю луки", "Эти луки в тренде"], category: "Стиль жизни" },
  "коллаб": { word: "Коллаб", definition: "Совместная работа, сотрудничество.", shortTranslation: "сотрудничество", examples: ["Сделали коллаб", "Коллаб брендов"], category: "Медиа" },
  "челлендж": { word: "Челлендж", definition: "Вызов, задание.", shortTranslation: "вызов", examples: ["Прошел челлендж", "Новый челлендж"], category: "Медиа" },
  "ливнуть": { word: "Ливнуть", definition: "Уйти, выйти из игры.", shortTranslation: "уйти", examples: ["Надо ливнуть", "Он ливнул"], category: "Общение" },
  "залипать": { word: "Залипать", definition: "Надолго увлечься.", shortTranslation: "увлечься", examples: ["Залип на видосы", "Могу залипать часами"], category: "Общение" },
  "френдзона": { word: "Френдзона", definition: "Когда один испытывает чувства, а другой видит друга.", shortTranslation: "дружба", examples: ["Попал во френдзону", "Зафрендзонила"], category: "Отношения" },
  "буст": { word: "Буст", definition: "Усиление, ускорение прогресса.", shortTranslation: "усиление", examples: ["Буст опыта", "Буст по рангу"], category: "Игры" },
  "бустить": { word: "Бустить", definition: "Усиливать, повышать ранг.", shortTranslation: "усиливать", examples: ["Бустит аккаунт", "Помоги бустнуть"], category: "Игры" },
  "тред": { word: "Тред", definition: "Ветка обсуждения.", shortTranslation: "обсуждение", examples: ["Интересный тред", "Читай тред"], category: "Интернет" },
  "кайф": { word: "Кайф", definition: "Удовольствие, наслаждение.", shortTranslation: "удовольствие", examples: ["Полный кайф", "Словил кайф"], category: "Эмоции" },
  "кайфовать": { word: "Кайфовать", definition: "Получать удовольствие.", shortTranslation: "наслаждаться", examples: ["Кайфую от отпуска", "Просто кайфовать"], category: "Эмоции" },
  "шмот": { word: "Шмот", definition: "Одежда, вещи.", shortTranslation: "одежда", examples: ["Купил шмот", "Классные шмотки"], category: "Стиль жизни" },
  "вайбить": { word: "Вайбить", definition: "Создавать атмосферу.", shortTranslation: "соответствовать", examples: ["Эта музыка вайбит", "Мы вайбим"], category: "Стиль жизни" },
  "чел": { word: "Чел", definition: "Человек, парень.", shortTranslation: "человек", examples: ["Чел, ты где?", "Этот чел крутой"], category: "Общение" },
  "инфа": { word: "Инфа", definition: "Информация, новость.", shortTranslation: "информация", examples: ["Инфа сотка", "Дай инфу"], category: "Общение" },
  "репостить": { word: "Репостить", definition: "Делиться чужим постом.", shortTranslation: "делиться", examples: ["Репостни пост", "Он репостит мемы"], category: "Интернет" },
  "контент": { word: "Контент", definition: "Материал, который создают блогеры.", shortTranslation: "содержание", examples: ["Создаю контент", "Качественный контент"], category: "Медиа" },
  "фидить": { word: "Фидить", definition: "Портить игру команде.", shortTranslation: "проигрывать", examples: ["Перестань фидить!", "Он фидит"], category: "Игры" },
  "братан": { word: "Братан", definition: "Друг, приятель.", shortTranslation: "друг", examples: ["Привет, братан!", "Братан, помоги"], category: "Общение" }
};

// Reverse dictionary for Russian to Slang translation
const reverseDictionary: Record<string, DictionaryEntry> = {
  "отдыхать": {
    word: "Отдыхать",
    definition: "Чилить",
    shortTranslation: "чилить",
    examples: ["Чилить у себя дома", "Почилим в парке"],
    category: "Общение"
  },
  "расслабляться": {
    word: "Расслабляться",
    definition: "Чилить",
    shortTranslation: "чилить",
    examples: ["Просто чилить и наслаждаться жизнью"],
    category: "О��щение"
  },
  "грустно": {
    word: "Грустно",
    definition: "Скучно",
    shortTranslation: "скучно",
    examples: ["Мне скучно без тебя"],
    category: "Эмоции"
  },
  "обида": {
    word: "Обида",
    definition: "Батхёрт",
    shortTranslation: "батхёрт",
    examples: ["У него полный батхёрт"],
    category: "Эмоции"
  },
  "плохо": {
    word: "Плохо",
    definition: "Криво",
    shortTranslation: "криво",
    examples: ["Работает криво"],
    category: "Общение"
  },
  "смешно": {
    word: "Смешно",
    definition: "Лол",
    shortTranslation: "лол",
    examples: ["Лол, это смешно!", "Кек, рофлю с этого"],
    category: "Интернет"
  },
  "старая шутка": {
    word: "Старая шутка",
    definition: "Баян",
    shortTranslation: "баян",
    examples: ["Это баян, все уже видели"],
    category: "Интернет"
  },
  "смеяться": {
    word: "Смеяться",
    definition: "Рофлить",
    shortTranslation: "рофлить",
    examples: ["Ору с этого", "Рофлю над мемами"],
    category: "Интернет"
  },
  "нравится": {
    word: "Нравится (человек)",
    definition: "Краш",
    shortTranslation: "краш",
    examples: ["Он мой краш"],
    category: "Отношения"
  },
  "хвастаться": {
    word: "Хвастаться",
    definition: "Флексить",
    shortTranslation: "флексить",
    examples: ["Флексит новыми кроссами"],
    category: "Стиль жизни"
  },
  "атмосфера": {
    word: "Атмосфера",
    definition: "Вайб",
    shortTranslation: "вайб",
    examples: ["Классный вайб здесь"],
    category: "Стиль жизни"
  },
  "неловко": {
    word: "Неловко",
    definition: "Кринж",
    shortTranslation: "кринж",
    examples: ["Полный кринж"],
    category: "Эмоции"
  },
  "неприятный": {
    word: "Неприятный человек",
    definition: "Токсик",
    shortTranslation: "токсик",
    examples: ["Он такой токсик"],
    category: "Общение"
  },
  "ненавидеть": {
    word: "Ненавидеть",
    definition: "Хейтить",
    shortTranslation: "хейтить",
    examples: ["Зачем хейтишь?"],
    category: "Общение"
  },
  "злиться": {
    word: "Злиться",
    definition: "Агриться",
    shortTranslation: "агриться",
    examples: ["Не агрись по мелочам"],
    category: "Эмоции"
  },
  "легко": {
    word: "Легко",
    definition: "Изи",
    shortTranslation: "изи",
    examples: ["Это изи"],
    category: "Игры"
  },
  "пойдем": {
    word: "Пойдем",
    definition: "Го",
    shortTranslation: "го",
    examples: ["Го играть", "Го в кино"],
    category: "Общение"
  },
  "качественно": {
    word: "Качественно",
    definition: "Годно",
    shortTranslation: "годно",
    examples: ["Годный контент"],
    category: "Стиль жизни"
  },
  "скучный": {
    word: "Скучный",
    definition: "Душный",
    shortTranslation: "душный",
    examples: ["Такой душный человек"],
    category: "Общение"
  },
  "популярность": {
    word: "Популярность",
    definition: "Хайп",
    shortTranslation: "хайп",
    examples: ["Вокруг этого хайп"],
    category: "Медиа"
  },
  "новичок": {
    word: "Новичок",
    definition: "Нуб",
    shortTranslation: "нуб",
    examples: ["Играет как нуб"],
    category: "Игры"
  },
  "профессионал": {
    word: "Профессионал",
    definition: "Про",
    shortTranslation: "про",
    examples: ["Настоящий про"],
    category: "Игры"
  },
  "задержка": {
    word: "Задержка",
    definition: "Лаг",
    shortTranslation: "лаг",
    examples: ["У меня лаги"],
    category: "Игры"
  },
  "красивый": {
    word: "Красивый",
    definition: "Сасный",
    shortTranslation: "сасный",
    examples: ["Сасный парень"],
    category: "Стиль жизни"
  },
  "шутка": {
    word: "Шутка (интернет)",
    definition: "Мем",
    shortTranslation: "мем",
    examples: ["Смешной мем", "Мемас"],
    category: "Интернет"
  },
  "розыгрыш": {
    word: "Розыгрыш",
    definition: "Пранк",
    shortTranslation: "пранк",
    examples: ["Эпичный пранк"],
    category: "Медиа"
  },
  "провоцировать": {
    word: "Провоцировать",
    definition: "Троллить",
    shortTranslation: "троллить",
    examples: ["Троллить в комментах"],
    category: "Общение"
  }
};

export const categories = [
  "Все категории",
  "Интернет",
  "Игры",
  "Эмоции",
  "Общение",
  "Стиль жизни",
  "Медиа",
  "Отношения"
];

export default function App() {
  const [searchValue, setSearchValue] = useState("");
  const [selectedCategory, setSelectedCategory] = useState("Все категории");
  const [selectedWord, setSelectedWord] = useState<string | null>(null);
  const [translation, setTranslation] = useState<DictionaryEntry | null>(null);
  const [translationMode, setTranslationMode] = useState<TranslationMode>("slangToRussian");

  // Helper function to match case of the first letter
  const matchCase = (original: string, translated: string): string => {
    if (!original || !translated) return translated;
    
    const firstChar = original.charAt(0);
    const isUpperCase = firstChar === firstChar.toUpperCase() && firstChar !== firstChar.toLowerCase();
    
    if (isUpperCase) {
      return translated.charAt(0).toUpperCase() + translated.slice(1);
    } else {
      return translated.charAt(0).toLowerCase() + translated.slice(1);
    }
  };

  // Helper function to find base form of a word
  const findBaseForm = (word: string): string => {
    const lowerWord = word.toLowerCase();
    // Check if it's already a base form or if there's a mapping to base form
    return wordFormsMap[lowerWord] || lowerWord;
  };

  const handleSearch = (text: string) => {
    const currentDictionary = translationMode === "slangToRussian" ? dictionary : reverseDictionary;
    
    // Split text into words, preserving punctuation
    const words = text.split(/(\s+|[.,!?;:—\-«»"„…]+)/);
    
    let translatedText = "";
    let foundWords: string[] = [];
    let wordExplanations: Array<{ word: string; explanation: string }> = [];
    
    // Process each word
    words.forEach(token => {
      const lowerToken = token.toLowerCase().trim();
      
      if (lowerToken) {
        // First try direct match
        let entry = currentDictionary[lowerToken];
        let baseForm = lowerToken;
        
        // If not found, try to find base form
        if (!entry) {
          baseForm = findBaseForm(lowerToken);
          entry = currentDictionary[baseForm];
        }
        
        // If we found a translation
        if (entry) {
          // Use shortTranslation if available, otherwise use definition
          const translationText = entry.shortTranslation || entry.definition;
          // Match the case of the original word
          const casedTranslation = matchCase(token.trim(), translationText);
          translatedText += casedTranslation;
          foundWords.push(lowerToken);
          
          // Store explanation for slang words (when translating from slang to Russian)
          if (translationMode === "slangToRussian" && entry.definition) {
            wordExplanations.push({
              word: token.trim(),
              explanation: entry.definition
            });
          }
        } else {
          // Keep original token if no translation found
          translatedText += token;
        }
      } else {
        // Keep spaces and punctuation
        translatedText += token;
      }
    });
    
    // If we found at least one word, show translated sentence
    if (foundWords.length > 0) {
      setSelectedWord(text);
      setTranslation({
        word: text,
        definition: translatedText,
        examples: [`Исходный текст: ${text}`],
        category: "Перевод предложения",
        explanations: wordExplanations.length > 0 ? wordExplanations : undefined
      });
    } else {
      // Single word lookup for backwards compatibility
      const wordKey = text.toLowerCase().trim();
      const baseForm = findBaseForm(wordKey);
      const found = currentDictionary[baseForm];
      
      if (found) {
        setSelectedWord(text);
        setTranslation(found);
      } else {
        setSelectedWord(text);
        setTranslation({
          word: text,
          definition: "Извините, в этом тексте не найдено слов из нашего словаря. Попробуйте другие слова из популярных.",
          examples: [],
          category: ""
        });
      }
    }
  };
  
  const toggleTranslationMode = () => {
    // Сохраняем текущие значения полей
    const currentInput = searchValue;
    const currentOutput = translation?.definition || "";
    
    // Переключаем режим перевода
    setTranslationMode(prev => prev === "slangToRussian" ? "russianToSlang" : "slangToRussian");
    
    // Меняем местами значения: выход становится входом
    if (currentOutput && 
        currentOutput !== "Извините, в этом тексте не найдено слов из нашего словаря. Попробуйте другие слова из популярных.") {
      setSearchValue(currentOutput);
      // Используем setTimeout, чтобы дать React время обновить состояние translationMode
      // и затем выполнить перевод с новым режимом
      setTimeout(() => handleSearch(currentOutput), 0);
    } else if (currentInput) {
      // Если нет перевода, оставляем текущий ввод
      setSearchValue(currentInput);
      setSelectedWord(null);
      setTranslation(null);
    } else {
      // Если оба поля пусты, просто очищаем
      setSearchValue("");
      setSelectedWord(null);
      setTranslation(null);
    }
  };

  const handleSelectWord = (word: string) => {
    setSearchValue(word);
    handleSearch(word);
  };

  return (
    <div className="min-h-screen bg-gray-50 flex flex-col">
      <Navbar />
      
      <main className="flex-1">
        <Header translationMode={translationMode} />
        
        <div className="max-w-6xl mx-auto px-4 mb-8">
          {/* Language selector header */}
          <div className="mb-4 flex items-center justify-center gap-4">
            <div className="bg-gray-800 border border-gray-700 rounded-lg px-4 py-3 flex items-center justify-between w-48">
              <span className="text-[rgb(255,255,255)] font-['Lora'] uppercase font-[Mako] font-normal text-[16px]">{translationMode === "slangToRussian" ? "Сленг" : "Русский"}</span>
              <ChevronDown className="w-5 h-5 text-gray-400" />
            </div>
            
            <Button 
              variant="ghost" 
              size="icon"
              onClick={toggleTranslationMode}
              className="rounded-full hover:bg-gray-100"
            >
              <ArrowRightLeft className="w-5 h-5 text-gray-600" />
            </Button>
            
            <div className="bg-gray-800 border border-gray-700 rounded-lg px-4 py-3 flex items-center justify-between w-48">
              <span className="text-gray-300">{translationMode === "slangToRussian" ? "Русский" : "Сленг"}</span>
              <ChevronDown className="w-5 h-5 text-gray-400" />
            </div>
          </div>
          
          {/* Translation areas */}
          <div className="grid grid-cols-1 lg:grid-cols-2 gap-4">
            <SearchBar
              value={searchValue}
              onChange={setSearchValue}
              onSearch={handleSearch}
              translationMode={translationMode}
            />
            
            <TranslationDisplay 
              selectedWord={selectedWord} 
              translation={translation}
              translationMode={translationMode}
            />
          </div>
        </div>
        
        <CategorySlider
          selectedCategory={selectedCategory}
          onSelectCategory={setSelectedCategory}
        />
        
        <div className="max-w-4xl mx-auto px-4 mb-8">
          <PopularWords 
            onSelectWord={handleSelectWord} 
            selectedWord={selectedWord}
            translationMode={translationMode}
            selectedCategory={selectedCategory}
          />
        </div>
        
        <Stats />
      </main>
      
      <Footer />
    </div>
  );
}
